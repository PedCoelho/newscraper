<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noticias JORNAL OGLOBO - 24h</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="loader.css">
  <link rel="shortcut icon" href="favicon.ico" />
</head>

<body>
  <div class="image-hider"><img src="./icon.png"></div>
  <div class="lds-roller">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
  <script>

    (async () => {
      const data = await fetch('https://oglobo-scraper.s3-sa-east-1.amazonaws.com/latest.json').then(x => {
        document.querySelector('.lds-roller').toggleAttribute('hidden')
        return x.json()
      })

      data.forEach((x, i) => {

        let content = `<div class="title">
                            <h1>${i}</h1>
                            <p>Publicado em: ${new Date(x.publicadoEm).toLocaleString()}
                            </p>
                          </div>
                          <div class="main-section">
                            <div>
                              <img src="${x.imagens.length > 0 ? x.imagens[0].url : 'noimage-found.png'}">
                            </div>
                            <div>
                              <b>Categoria: ${x.secao.nome}</b><br>
                              <h2>${x.titulo}</h2>
                              <h4>${x.subTitulo}</h4>
                              <p>Endere√ßo:</p>
                              <a class="link" href="${x.url}">${x.url}</a>
                            </div>
                          </div>
                        `

        let container = document.createElement('div')
        container.classList.add('card')
        container.innerHTML = content

        document.body.appendChild(container)

      })

    })()
  </script>
  <script>
    document.querySelector('.image-hider').addEventListener('click', toggleImages)

    function toggleImages() {
      let images = document.querySelectorAll('.main-section div:first-child')
      images.forEach((div) => {
        div.toggleAttribute('hidden')
        div.style.flex = '0 0 0 100%'
      })

      let otherDiv = document.querySelectorAll('.main-section div:last-child')
      otherDiv.forEach((div) => div.classList.toggle('full-flex'))
    }
  </script>


</body>

</html>